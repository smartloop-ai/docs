name: Deploy to Google Cloud Storage

on:
    push:
        branches:
            - main  # or your default branch
jobs:
    deploy:
        runs-on: ubuntu-latest
        steps:
        - name: Checkout code
          uses: actions/checkout@v3
        - name: Set up Cloud SDK
          uses: google-github-actions/setup-gcloud@v1
          with:
            project_id: ${{ secrets.GCP_PROJECT_ID }}
            service_account_key: ${{ secrets.GCP_SA_KEY }}
            export_default_credentials: true
        - name: Upload to GCS
          run: |
            gsutil -m rsync -r ./docs gs://${{ secrets.GCS_BUCKET }}